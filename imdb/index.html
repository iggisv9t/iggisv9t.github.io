<html>
  <head>
    <link rel="stylesheet" href="shinglesite.css">
    <link rel="stylesheet" href="shingle.css">
    <link rel="stylesheet" href="shingleInfoPanel.css">
    <script src="shingle.js" type="text/javascript"></script>
    <script src="shingleInfoPanel.js" type="text/javascript"></script>
  </head>
  <body>
    <div style="margin: 20px">
  <span style="display:inline-block; font-size:20pt">IMDB interactive map</span>
  <span style="display:inline-block; padding-left: 40px;"><form><input type="text" id="myInput" placeholder="Go to movie id"></form></span>
</div>
  <div id="shinglecontainer" data-width="100%" data-height="85%" data-graph-path="result/" data-node-field="nodenumber"></div>

  <div style="width: 1000px; margin: 0 30;">
    <p>To find specific movie, paste it's IMDb id into the field in top of the page. For example tt0076759.
        You can find it in IMDb movie page url like this: http://www.imdb.com/title/tt0076759/
    </p>
    
    <p>Color corresponds to movie rating (green is high, red is low), link means recommendation.</p>
  </div>
 <script>
  
      document.getElementById('myInput').onkeypress = function(e){
      if (!e) e = window.event;
      var keyCode = e.keyCode || e.which;
      if (keyCode == '13'){
        // Enter pressed
        var input = document.getElementById('myInput');
        console.log(input.value);
        _url = location.href;
        _url = _url.split('?')[0] + "?nodenumber=" + input.value;
        console.log(_url);
        window.location.replace(_url);
        
        return false;
      }
    };
  
        </script>

  <script>
    /*
     * create an info component in the graph panel, here we use the supplied shingleInfoPanel.js
     */
    var theInfoData = new shingleInfoPanel();

    /*
     * create the graph
     */
    var myGraph = shingle.new({
      // use the created element
      el: document.getElementById("shinglecontainer"),
      // supply info panel content
      infoContentEl: theInfoData.el,

      nodeRadiusScaleFactor : 1000/2.0,
      nodeRadiusScalePower: 1.5,
      initialZoom : 50,
      useBitmap: true,
      useMarkers: true,
      hoverDelay: 100,
      nodeColors: [
      [255,0,0],
[252,2,5],
[249,5,10],
[247,7,15],
[244,10,20],
[242,12,26],
[239,15,31],
[236,18,36],
[234,20,41],
[231,23,46],
[229,25,52],
[226,28,57],
[224,30,62],
[221,33,67],
[218,36,72],
[216,38,78],
[213,41,83],
[211,43,88],
[208,46,93],
[206,48,98],
[203,51,104],
[200,54,109],
[198,56,114],
[195,59,119],
[193,61,124],
[190,64,130],
[188,66,135],
[185,69,140],
[182,72,145],
[180,74,150],
[177,77,156],
[175,79,161],
[172,82,166],
[170,85,171],
[167,87,176],
[164,90,182],
[162,92,187],
[159,95,192],
[157,97,197],
[154,100,202],
[151,103,208],
[149,105,213],
[146,108,218],
[144,110,223],
[141,113,228],
[139,115,234],
[136,118,239],
[133,121,244],
[131,123,249],
[128,126,255],
[126,128,255],
[123,131,249],
[121,133,244],
[118,136,239],
[115,139,234],
[113,141,228],
[110,144,223],
[108,146,218],
[105,149,213],
[103,151,208],
[100,154,202],
[97,157,197],
[95,159,192],
[92,162,187],
[90,164,182],
[87,167,176],
[85,170,171],
[82,172,166],
[79,175,161],
[77,177,156],
[74,180,150],
[72,182,145],
[69,185,140],
[66,188,135],
[64,190,130],
[61,193,124],
[59,195,119],
[56,198,114],
[54,200,109],
[51,203,104],
[48,206,98],
[46,208,93],
[43,211,88],
[41,213,83],
[38,216,78],
[36,218,72],
[33,221,67],
[30,224,62],
[28,226,57],
[25,229,52],
[23,231,46],
[20,234,41],
[18,236,36],
[15,239,31],
[12,242,26],
[10,244,20],
[7,247,15],
[5,249,10],
[2,252,5],
[0,255,0],
[0,255,0]
],

      onClear: function() {
        //
        // clear the info panel
        theInfoData.clear();
      }, onFocus: function(quadid, nodeid, data) {
        //
        // when clicked on node in graph set this node in the info panel
        theInfoData.setMainNode(quadid, nodeid, data);
      }, onFocusRelatedNode: function(quadid, nodeid, data) {
        //
        // when clicked on node in graph this is called for each related node
        // set the related nodes in the info panel
        theInfoData.appendRelatedNode(quadid, nodeid, data);
      }, onHoverIn: function(quadid, nodeid) {
        //
        // when hovered (mousover) on node in graph highlight in the info panel
        theInfoData.highLightNode(quadid,nodeid);
      }, onHoverOut: function() {
        //
        // when blur (mousout) on node in graph unhighlight in the info panel
        theInfoData.unHighLightNode();
      }
    });                                        

    /*
     * set the info panel hover behaviour
     */
    theInfoData.onHover(function(quadId, nodeId) {
      //
      // highlight the hovered node in the graph
      myGraph.hoverIn(quadId, nodeId);
    });

    /*
     * set the info panel click behaviour
     */
    theInfoData.onClick(function(quadid, nodeid) {
      //
      // make the cliched node active in the graph
      myGraph.changehighlightTo(quadid, nodeid);
    });
  </script>

  </body>
</html>
